{"ast":null,"code":"var _jsxFileName = \"/home/labber/lighthouse/GeTogether/react-front-end/src/components/main/join.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthProvider';\nimport { faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JoinButton(props) {\n  _s();\n\n  const {\n    user,\n    auth\n  } = useContext(AuthContext);\n  const [joined, setJoined] = useState(false);\n  const [result, setResult] = useState([]);\n  console.log(props);\n  useEffect(() => {\n    setResult(whatButton());\n  }, []);\n  const [hostId, setHostId] = useState(null);\n  useEffect(() => {\n    if (auth) {\n      axios.post('/events/joined', `userId=${user.id}&eventId=${props.eventId}`).then(res => {\n        setJoined(res.data);\n        setResult(whatButton());\n      });\n    } else {\n      setResult([/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: needAuth,\n        class: \"btn btn-primary\",\n        children: [\"Join \", /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faEnvelope\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 18\n      }, this)]);\n    }\n  }, [joined]);\n  console.log(\"HOST ID:\");\n\n  const needAuth = e => {\n    e.preventDefault();\n    document.getElementById('basic-nav-dropdown').click();\n  };\n\n  const unregister = e => {\n    e.preventDefault();\n    axios.post('/events/unregister', `userId=${user.id}&eventId=${props.eventId}`).then(res => {\n      setJoined(false);\n    });\n  };\n\n  const joinEvent = e => {\n    e.preventDefault();\n    axios.post(`/events/${props.eventId}/join`, `userId=${user.id}`).then(res => {\n      setJoined(true);\n    });\n  };\n\n  const whatButton = () => {\n    const result = [];\n\n    if (!(props.hostId === user.id)) {\n      if (!joined) {\n        result.push( /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: joinEvent,\n          class: \"btn btn-primary\",\n          children: [\"Join \", /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faEnvelope\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 78\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this));\n      } else {\n        result.push( /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: unregister,\n          class: \"btn btn-primary\",\n          children: [\"Unregister\", /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faEnvelope\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this));\n      }\n    }\n\n    return result;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: result\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(JoinButton, \"eZthZoY2g4lxSayZZ+bpm2UYsGQ=\");\n\n_c = JoinButton;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinButton\");","map":{"version":3,"names":["useContext","useEffect","useState","axios","AuthContext","faEnvelope","FontAwesomeIcon","JoinButton","props","user","auth","joined","setJoined","result","setResult","console","log","whatButton","hostId","setHostId","post","id","eventId","then","res","data","needAuth","e","preventDefault","document","getElementById","click","unregister","joinEvent","push"],"sources":["/home/labber/lighthouse/GeTogether/react-front-end/src/components/main/join.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthProvider';\nimport { faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default function JoinButton(props) {\n  const { user, auth } = useContext(AuthContext);\n  const [joined, setJoined] = useState(false);\n  const [result, setResult] = useState([]);\n\n  console.log(props);\n  useEffect(() => {\n    setResult(whatButton());\n  }, []);\n\n  const [hostId, setHostId] = useState(null);\n\n\n  useEffect(() => {\n    if (auth) {\n       axios.post('/events/joined', `userId=${user.id}&eventId=${props.eventId}`).then((res) => {\n        setJoined(res.data);\n        setResult(whatButton());\n      });\n    } else {\n      setResult([<button onClick={needAuth} class=\"btn btn-primary\">Join <FontAwesomeIcon icon={faEnvelope} /></button>]);\n    }\n  }, [joined]);\n\n  console.log(\"HOST ID:\", )\n\n  const needAuth = (e) => {\n    e.preventDefault();\n    document.getElementById('basic-nav-dropdown').click();\n  };\n\n  const unregister = (e) => {\n    e.preventDefault();\n\n    axios.post('/events/unregister', `userId=${user.id}&eventId=${props.eventId}`).then((res) => {\n      setJoined(false);\n    });\n  };\n\n  const joinEvent = (e) => {\n    e.preventDefault();\n\n    axios.post(`/events/${props.eventId}/join`, `userId=${user.id}`).then((res) => {\n      setJoined(true);\n    });\n  };\n\n  const whatButton = () => {\n    const result = [];\n    if (!(props.hostId === user.id)) {\n      if (!joined) {\n        result.push(<button onClick={joinEvent} class=\"btn btn-primary\">Join <FontAwesomeIcon icon={faEnvelope} /></button>)\n      } else {\n        result.push(<button onClick={unregister} class=\"btn btn-primary\">Unregister<FontAwesomeIcon icon={faEnvelope} /></button>);\n      }\n    }\n    return result;\n  };\n\n  return (\n    <div>{result}</div>);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}