{"ast":null,"code":"import { forwardRef, useRef, createElement, useContext, useEffect, useCallback, useMemo, Fragment, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\nimport { createNamedContext } from '@reach/utils/context';\nimport { isFunction } from '@reach/utils/type-check';\nimport { makeId } from '@reach/utils/make-id';\nimport { noop } from '@reach/utils/noop';\nimport { useCheckStyles } from '@reach/utils/dev-utils';\nimport { useComposedRefs } from '@reach/utils/compose-refs';\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\nimport { useStatefulRefValue } from '@reach/utils/use-stateful-ref-value';\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\nimport { useId } from '@reach/auto-id';\nimport { Popover, positionMatchWidth } from '@reach/popover';\nimport warning from 'tiny-warning';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n} // Forked from https://github.com/bvaughn/highlight-words-core\n\n/**\n * Creates an array of chunk objects representing both higlightable and non\n * highlightable pieces of text that match each search word.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction findAll(_ref) {\n  var autoEscape = _ref.autoEscape,\n      _ref$caseSensitive = _ref.caseSensitive,\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n      _ref$findChunks = _ref.findChunks,\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\n      sanitize = _ref.sanitize,\n      searchWords = _ref.searchWords,\n      textToHighlight = _ref.textToHighlight;\n  return fillInChunks({\n    chunksToHighlight: combineChunks({\n      chunks: findChunks({\n        autoEscape: autoEscape,\n        caseSensitive: caseSensitive,\n        sanitize: sanitize,\n        searchWords: searchWords,\n        textToHighlight: textToHighlight\n      })\n    }),\n    totalLength: textToHighlight ? textToHighlight.length : 0\n  });\n}\n/**\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\n * single chunks.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction combineChunks(_ref2) {\n  var chunks = _ref2.chunks;\n  return chunks.sort(function (first, second) {\n    return first.start - second.start;\n  }).reduce(function (processedChunks, nextChunk) {\n    // First chunk just goes straight in the array...\n    if (processedChunks.length === 0) {\n      return [nextChunk];\n    } else {\n      // ... subsequent chunks get checked to see if they overlap...\n      var prevChunk = processedChunks.pop();\n\n      if (nextChunk.start <= prevChunk.end) {\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n        // largest of the end indeces.\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n        processedChunks.push({\n          highlight: false,\n          start: prevChunk.start,\n          end: endIndex\n        });\n      } else {\n        processedChunks.push(prevChunk, nextChunk);\n      }\n\n      return processedChunks;\n    }\n  }, []);\n}\n/**\n * Examine text for any matches. If we find matches, add them to the returned\n * array as a \"chunk\" object.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction defaultFindChunks(_ref3) {\n  var autoEscape = _ref3.autoEscape,\n      caseSensitive = _ref3.caseSensitive,\n      _ref3$sanitize = _ref3.sanitize,\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\n      searchWords = _ref3.searchWords,\n      textToHighlight = _ref3.textToHighlight;\n  textToHighlight = sanitize(textToHighlight || \"\");\n  return searchWords.filter(function (searchWord) {\n    return searchWord;\n  }) // Remove empty words\n  .reduce(function (chunks, searchWord) {\n    searchWord = sanitize(searchWord);\n\n    if (autoEscape) {\n      searchWord = escapeRegExpFn(searchWord);\n    }\n\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\n    var match;\n\n    while (match = regex.exec(textToHighlight || \"\")) {\n      var start = match.index;\n      var end = regex.lastIndex; // We do not return zero-length matches\n\n      if (end > start) {\n        chunks.push({\n          highlight: false,\n          start: start,\n          end: end\n        });\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\n\n      if (match.index === regex.lastIndex) {\n        regex.lastIndex++;\n      }\n    }\n\n    return chunks;\n  }, []);\n}\n/**\n * Given a set of chunks to highlight, create an additional set of chunks\n * to represent the bits of text between the highlighted text.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction fillInChunks(_ref4) {\n  var chunksToHighlight = _ref4.chunksToHighlight,\n      totalLength = _ref4.totalLength;\n  var allChunks = [];\n\n  if (chunksToHighlight.length === 0) {\n    append(0, totalLength, false);\n  } else {\n    var lastIndex = 0;\n    chunksToHighlight.forEach(function (chunk) {\n      append(lastIndex, chunk.start, false);\n      append(chunk.start, chunk.end, true);\n      lastIndex = chunk.end;\n    });\n    append(lastIndex, totalLength, false);\n  }\n\n  return allChunks;\n\n  function append(start, end, highlight) {\n    if (end - start > 0) {\n      allChunks.push({\n        start: start,\n        end: end,\n        highlight: highlight\n      });\n    }\n  }\n}\n\nfunction defaultSanitize(string) {\n  return string;\n}\n\nfunction escapeRegExpFn(string) {\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\nvar HighlightWords = {\n  combineChunks: combineChunks,\n  fillInChunks: fillInChunks,\n  findAll: findAll,\n  findChunks: defaultFindChunks\n};\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\n    _excluded4 = [\"persistSelection\", \"as\"],\n    _excluded5 = [\"as\", \"children\", \"index\", \"value\", \"onClick\"],\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\n\nvar _on, _on2, _on3, _on4, _states; // States\n// Nothing going on, waiting for the user to type or use the arrow keys\n\n\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\n\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\n\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\n// are not ComboboxInputs\n\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\n// Events\n// User cleared the value w/ backspace, but input still has focus\n\nvar CLEAR = \"CLEAR\"; // User is typing\n\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\n// Prevents initial change from sending the user to the NAVIGATING state\n// https://github.com/reach/reach-ui/issues/464\n\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\n\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\n// value from the click, not the current nav item\n\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\n\nvar ESCAPE = \"ESCAPE\";\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\n\nvar INTERACT = \"INTERACT\";\nvar FOCUS = \"FOCUS\";\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar stateChart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\n  }, _states[SUGGESTING] = {\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\n  }, _states[NAVIGATING] = {\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\n  }, _states[INTERACTING] = {\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\n  }, _states)\n};\n\nvar reducer = function reducer(data, event) {\n  var nextState = _extends({}, data, {\n    lastEventType: event.type\n  });\n\n  switch (event.type) {\n    case CHANGE:\n    case INITIAL_CHANGE:\n      return _extends({}, nextState, {\n        navigationValue: null,\n        value: event.value\n      });\n\n    case NAVIGATE:\n    case OPEN_WITH_BUTTON:\n    case OPEN_WITH_INPUT_CLICK:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    case CLEAR:\n      return _extends({}, nextState, {\n        value: \"\",\n        navigationValue: null\n      });\n\n    case BLUR:\n    case ESCAPE:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case SELECT_WITH_CLICK:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : event.value,\n        navigationValue: null\n      });\n\n    case SELECT_WITH_KEYBOARD:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : data.navigationValue,\n        navigationValue: null\n      });\n\n    case CLOSE_WITH_BUTTON:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case INTERACT:\n      return nextState;\n\n    case FOCUS:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    default:\n      return nextState;\n  }\n};\n\nfunction popoverIsExpanded(state) {\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\n}\n/**\n * When we open a list, set the navigation value to the value in the input, if\n * it's in the list, then it'll automatically be highlighted.\n *\n * @param stateData\n * @param event\n */\n\n\nfunction findNavigationValue(stateData, event) {\n  // @ts-ignore\n  if (event.value) {\n    // @ts-ignore\n    return event.value; // @ts-ignore\n  } else if (event.persistSelection) {\n    return stateData.value;\n  } else {\n    return null;\n  }\n}\n\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\n// can work it's highlight text magic no matter what else is rendered around\n// it.\n\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Combobox\n *\n * @see Docs https://reach.tech/combobox#combobox\n */\n\nvar Combobox = /*#__PURE__*/forwardRef(function (_ref, forwardedRef) {\n  var _data$navigationValue;\n\n  var onSelect = _ref.onSelect,\n      _ref$openOnFocus = _ref.openOnFocus,\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\n      ariaLabel = _ref[\"aria-label\"],\n      ariaLabelledby = _ref[\"aria-labelledby\"],\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useDescendantsInit = useDescendantsInit(),\n      options = _useDescendantsInit[0],\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\n\n\n  var inputRef = useRef();\n  var popoverRef = useRef();\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\n  // the user's value while navigating (because it's always the user's value),\n  // but we need to know this in useKeyDown which is far away from the prop\n  // here, so we do something sneaky and write it to this ref on context so we\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\n  // about this one too!\n\n  var autocompletePropRef = useRef(false);\n  var persistSelectionRef = useRef(false);\n  var defaultData = {\n    // The value the user has typed. We derive this also when the developer is\n    // controlling the value of ComboboxInput.\n    value: \"\",\n    // the value the user has navigated to with the keyboard\n    navigationValue: null\n  };\n\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\n      state = _useReducerMachine[0],\n      data = _useReducerMachine[1],\n      transition = _useReducerMachine[2];\n\n  useFocusManagement(data.lastEventType, inputRef);\n  var id = useId(props.id);\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\n  var isControlledRef = useRef(false);\n  var isExpanded = popoverIsExpanded(state);\n  var context = {\n    ariaLabel: ariaLabel,\n    ariaLabelledby: ariaLabelledby,\n    autocompletePropRef: autocompletePropRef,\n    buttonRef: buttonRef,\n    comboboxId: id,\n    data: data,\n    inputRef: inputRef,\n    isExpanded: isExpanded,\n    listboxId: listboxId,\n    onSelect: onSelect || noop,\n    openOnFocus: openOnFocus,\n    persistSelectionRef: persistSelectionRef,\n    popoverRef: popoverRef,\n    state: state,\n    transition: transition,\n    isControlledRef: isControlledRef\n  };\n  useCheckStyles(\"combobox\");\n  return /*#__PURE__*/createElement(DescendantProvider, {\n    context: ComboboxDescendantContext,\n    items: options,\n    set: setOptions\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\n    value: context\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\n    \"data-reach-combobox\": \"\",\n    \"data-state\": getDataState(state),\n    \"data-expanded\": isExpanded || undefined,\n    ref: forwardedRef\n  }), isFunction(children) ? children({\n    id: id,\n    isExpanded: isExpanded,\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\n    state: state\n  }) : children)));\n});\n/**\n * @see Docs https://reach.tech/combobox#combobox-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  Combobox.displayName = \"Combobox\";\n  Combobox.propTypes = {\n    as: PropTypes.any,\n    onSelect: PropTypes.func,\n    openOnFocus: PropTypes.bool\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxInput\n *\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxinput\n */\n\n\nvar ComboboxInput = /*#__PURE__*/forwardRef(function (_ref2, forwardedRef) {\n  var _ref2$as = _ref2.as,\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\n      _ref2$selectOnClick = _ref2.selectOnClick,\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\n      _ref2$autocomplete = _ref2.autocomplete,\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\n      onClick = _ref2.onClick,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onBlur = _ref2.onBlur,\n      onFocus = _ref2.onFocus,\n      controlledValue = _ref2.value,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2); // https://github.com/reach/reach-ui/issues/464\n\n\n  var _React$useRef = useRef(controlledValue),\n      initialControlledValue = _React$useRef.current;\n\n  var controlledValueChangedRef = useRef(false);\n  useUpdateEffect(function () {\n    controlledValueChangedRef.current = true;\n  }, [controlledValue]);\n\n  var _React$useContext = useContext(ComboboxContext),\n      _React$useContext$dat = _React$useContext.data,\n      navigationValue = _React$useContext$dat.navigationValue,\n      value = _React$useContext$dat.value,\n      lastEventType = _React$useContext$dat.lastEventType,\n      inputRef = _React$useContext.inputRef,\n      state = _React$useContext.state,\n      transition = _React$useContext.transition,\n      listboxId = _React$useContext.listboxId,\n      autocompletePropRef = _React$useContext.autocompletePropRef,\n      openOnFocus = _React$useContext.openOnFocus,\n      isExpanded = _React$useContext.isExpanded,\n      ariaLabel = _React$useContext.ariaLabel,\n      ariaLabelledby = _React$useContext.ariaLabelledby,\n      persistSelectionRef = _React$useContext.persistSelectionRef,\n      isControlledRef = _React$useContext.isControlledRef;\n\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\n  // caused by clicking inside the list, and if so, don't close the List.\n\n  var selectOnClickRef = useRef(false);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var isControlled = typeof controlledValue !== \"undefined\";\n  var wasInitiallyControlled = typeof initialControlledValue !== \"undefined\";\n\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? warning(!(!isControlled && wasInitiallyControlled), \"ComboboxInput is changing from controlled to uncontrolled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(isControlled && !wasInitiallyControlled), \"ComboboxInput is changing from uncontrolled to controlled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n  }\n\n  useEffect(function () {\n    isControlledRef.current = isControlled; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isControlled]); // Layout effect should be SSR-safe here because we don't actually do\n  // anything with this ref that involves rendering until after we've\n  // let the client hydrate in nested components.\n\n  useIsomorphicLayoutEffect(function () {\n    autocompletePropRef.current = autocomplete;\n  }, [autocomplete, autocompletePropRef]);\n  var handleValueChange = useCallback(function (value) {\n    if (value.trim() === \"\") {\n      transition(CLEAR, {\n        isControlled: isControlled\n      });\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\n      transition(INITIAL_CHANGE, {\n        value: value\n      });\n    } else {\n      transition(CHANGE, {\n        value: value\n      });\n    }\n  }, [initialControlledValue, transition, isControlled]);\n  useEffect(function () {\n    // If they are controlling the value we still need to do our transitions,\n    // so  we have this derived state to emulate onChange of the input as we\n    // receive new `value`s ...[*]\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\n      handleValueChange(controlledValue);\n    }\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\n  // user types, instead the developer controls it with the normal input\n  // onChange prop\n\n  function handleChange(event) {\n    var value = event.target.value;\n\n    if (!isControlled) {\n      handleValueChange(value);\n    }\n  }\n\n  function handleFocus() {\n    if (selectOnClick) {\n      selectOnClickRef.current = true;\n    } // If we select an option with click, useFocusManagement will focus the\n    // input, in those cases we don't want to cause the menu to open back up,\n    // so we guard behind these states.\n\n\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\n      transition(FOCUS, {\n        persistSelection: persistSelectionRef.current\n      });\n    }\n  }\n\n  function handleClick() {\n    if (selectOnClickRef.current) {\n      var _inputRef$current;\n\n      selectOnClickRef.current = false;\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\n    }\n\n    if (openOnFocus && state === IDLE) {\n      transition(OPEN_WITH_INPUT_CLICK);\n    }\n  }\n\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\n  navigationValue || controlledValue || value : controlledValue || value;\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\n    \"aria-autocomplete\": \"both\",\n    \"aria-controls\": listboxId,\n    \"aria-expanded\": isExpanded,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\n    role: \"combobox\"\n  }, props, {\n    \"data-reach-combobox-input\": \"\",\n    \"data-state\": getDataState(state),\n    ref: ref,\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    onChange: composeEventHandlers(onChange, handleChange),\n    onClick: composeEventHandlers(onClick, handleClick),\n    onFocus: composeEventHandlers(onFocus, handleFocus),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    value: inputValue || \"\"\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxinput-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxInput.displayName = \"ComboboxInput\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxPopover\n *\n * Contains the popup that renders the list. Because some UI needs to render\n * more than the list in the popup, you need to render one of these around the\n * list. For example, maybe you want to render the number of results suggested.\n *\n * @see Docs https://reach.tech/combobox#comboboxpopover\n */\n\n\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function (_ref3, forwardedRef) {\n  var _ref3$as = _ref3.as,\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\n      children = _ref3.children,\n      _ref3$portal = _ref3.portal,\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\n      onKeyDown = _ref3.onKeyDown,\n      onBlur = _ref3.onBlur,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  var _React$useContext2 = useContext(ComboboxContext),\n      popoverRef = _React$useContext2.popoverRef,\n      inputRef = _React$useContext2.inputRef,\n      isExpanded = _React$useContext2.isExpanded,\n      state = _React$useContext2.state;\n\n  var ref = useComposedRefs(popoverRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var sharedProps = {\n    \"data-reach-combobox-popover\": \"\",\n    \"data-state\": getDataState(state),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    // Instead of conditionally rendering the popover we use the `hidden` prop\n    // because we don't want to unmount on close (from escape or onSelect).\n    // However, the developer can conditionally render the ComboboxPopover if\n    // they do want to cause mount/unmount based on the app's own data (like\n    // results.length or whatever).\n    hidden: !isExpanded,\n    tabIndex: -1,\n    children: children\n  };\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\n    as: Comp\n  }, props, {\n    ref: ref,\n    \"data-expanded\": isExpanded || undefined,\n    position: position,\n    targetRef: inputRef,\n    unstable_skipInitialPortalRender: true\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\n    ref: ref\n  }, props, sharedProps));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxPopover.displayName = \"ComboboxPopover\";\n}\n/**\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\n */\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxList\n *\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\n * for the list.\n *\n * @see Docs https://reach.tech/combobox#comboboxlist\n */\n\n\nvar ComboboxList = /*#__PURE__*/forwardRef(function (_ref4, forwardedRef) {\n  var _ref4$persistSelectio = _ref4.persistSelection,\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\n      _ref4$as = _ref4.as,\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\n\n  var _React$useContext3 = useContext(ComboboxContext),\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\n      listboxId = _React$useContext3.listboxId;\n\n  if (persistSelection) {\n    persistSelectionRef.current = true;\n  }\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    role: \"listbox\"\n  }, props, {\n    ref: forwardedRef,\n    \"data-reach-combobox-list\": \"\",\n    id: listboxId\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxlist-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxList.displayName = \"ComboboxList\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOption\n *\n * An option that is suggested to the user as they interact with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxoption\n */\n\n\nvar ComboboxOption = /*#__PURE__*/forwardRef(function (_ref5, forwardedRef) {\n  var _ref5$as = _ref5.as,\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\n      children = _ref5.children,\n      indexProp = _ref5.index,\n      value = _ref5.value,\n      onClick = _ref5.onClick,\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\n\n  var _React$useContext4 = useContext(ComboboxContext),\n      onSelect = _React$useContext4.onSelect,\n      navigationValue = _React$useContext4.data.navigationValue,\n      transition = _React$useContext4.transition,\n      isControlledRef = _React$useContext4.isControlledRef;\n\n  var ownRef = useRef(null);\n\n  var _useStatefulRefValue = useStatefulRefValue(ownRef, null),\n      element = _useStatefulRefValue[0],\n      handleRefSet = _useStatefulRefValue[1];\n\n  var descendant = useMemo(function () {\n    return {\n      element: element,\n      value: value\n    };\n  }, [value, element]);\n  var index = useDescendant(descendant, ComboboxDescendantContext, indexProp);\n  var ref = useComposedRefs(forwardedRef, handleRefSet);\n  var isActive = navigationValue === value;\n\n  var handleClick = function handleClick() {\n    onSelect && onSelect(value);\n    transition(SELECT_WITH_CLICK, {\n      value: value,\n      isControlled: isControlledRef.current\n    });\n  };\n\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\n    value: {\n      value: value,\n      index: index\n    }\n  }, /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-selected\": isActive,\n    role: \"option\"\n  }, props, {\n    \"data-reach-combobox-option\": \"\",\n    ref: ref,\n    id: String(makeHash(value)),\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\n    // element can be `document.activeElement` and then our focus checks in\n    // onBlur will work as intended\n    ,\n    tabIndex: -1,\n    onClick: composeEventHandlers(onClick, handleClick)\n  }), children ? isFunction(children) ? children({\n    value: value,\n    index: index\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxoption-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOption.displayName = \"ComboboxOption\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOptionText\n *\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\n * matching and non-matching segments of text.\n *\n * We don't forwardRef or spread props because we render multiple spans or null,\n * should be fine 🤙\n *\n * @example\n *   <ComboboxOption value=\"Seattle\">\n *     🌧 <ComboboxOptionText />\n *   </ComboboxOption>\n *\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\n */\n\n\nfunction ComboboxOptionText() {\n  var _React$useContext5 = useContext(OptionContext),\n      value = _React$useContext5.value;\n\n  var _React$useContext6 = useContext(ComboboxContext),\n      contextValue = _React$useContext6.data.value;\n\n  var results = useMemo(function () {\n    return HighlightWords.findAll({\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\n      textToHighlight: value\n    });\n  }, [contextValue, value]);\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\n    var str = value.slice(result.start, result.end);\n    return /*#__PURE__*/createElement(\"span\", {\n      key: index,\n      \"data-reach-combobox-option-text\": \"\",\n      \"data-user-value\": result.highlight ? true : undefined,\n      \"data-suggested-value\": result.highlight ? undefined : true\n    }, str);\n  }) : value);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxButton\n */\n\n\nvar ComboboxButton = /*#__PURE__*/forwardRef(function (_ref6, forwardedRef) {\n  var _ref6$as = _ref6.as,\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\n      onClick = _ref6.onClick,\n      onKeyDown = _ref6.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\n\n  var _React$useContext7 = useContext(ComboboxContext),\n      transition = _React$useContext7.transition,\n      state = _React$useContext7.state,\n      buttonRef = _React$useContext7.buttonRef,\n      listboxId = _React$useContext7.listboxId,\n      isExpanded = _React$useContext7.isExpanded;\n\n  var ref = useComposedRefs(buttonRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n\n  var handleClick = function handleClick() {\n    if (state === IDLE) {\n      transition(OPEN_WITH_BUTTON);\n    } else {\n      transition(CLOSE_WITH_BUTTON);\n    }\n  };\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-controls\": listboxId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-expanded\": isExpanded\n  }, props, {\n    \"data-reach-combobox-button\": \"\",\n    ref: ref,\n    onClick: composeEventHandlers(onClick, handleClick),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\n  }));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxButton.displayName = \"ComboboxButton\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Move focus back to the input if we start navigating w/ the\n * keyboard after focus has moved to any focusable content in\n * the popup.\n *\n * @param lastEventType\n * @param inputRef\n */\n\n\nfunction useFocusManagement(lastEventType, inputRef) {\n  // useLayoutEffect so that the cursor goes to the end of the input instead\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\n  //\n  // Should be safe to use here since we're just focusing an input.\n  useIsomorphicLayoutEffect(function () {\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\n    }\n  }, [inputRef, lastEventType]);\n}\n/**\n * We want the same events when the input or the popup have focus (HOW COOL ARE\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\n */\n\n\nfunction useKeyDown() {\n  var _React$useContext8 = useContext(ComboboxContext),\n      navigationValue = _React$useContext8.data.navigationValue,\n      onSelect = _React$useContext8.onSelect,\n      state = _React$useContext8.state,\n      transition = _React$useContext8.transition,\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\n      persistSelectionRef = _React$useContext8.persistSelectionRef,\n      isControlledRef = _React$useContext8.isControlledRef;\n\n  var options = useDescendants(ComboboxDescendantContext);\n  return function handleKeyDown(event) {\n    var index = options.findIndex(function (_ref7) {\n      var value = _ref7.value;\n      return value === navigationValue;\n    });\n\n    function getNextOption() {\n      var atBottom = index === options.length - 1;\n\n      if (atBottom) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getFirstOption();\n        }\n      } else {\n        // Go to the next item in the list\n        return options[(index + 1) % options.length];\n      }\n    }\n\n    function getPreviousOption() {\n      var atTop = index === 0;\n\n      if (atTop) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getLastOption();\n        }\n      } else if (index === -1) {\n        // displaying the user's value, so go select the last one\n        return getLastOption();\n      } else {\n        // normal case, select previous\n        return options[(index - 1 + options.length) % options.length];\n      }\n    }\n\n    function getFirstOption() {\n      return options[0];\n    }\n\n    function getLastOption() {\n      return options[options.length - 1];\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || !options.length) {\n          return;\n        }\n\n        if (state === IDLE) {\n          // Opening a closed list\n          transition(NAVIGATE, {\n            persistSelection: persistSelectionRef.current\n          });\n        } else {\n          var next = getNextOption();\n          transition(NAVIGATE, {\n            value: next ? next.value : null\n          });\n        }\n\n        break;\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\n\n      case \"ArrowUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          var prev = getPreviousOption();\n          transition(NAVIGATE, {\n            value: prev ? prev.value : null\n          });\n        }\n\n        break;\n\n      case \"Home\":\n      case \"PageUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getFirstOption().value\n          });\n        }\n\n        break;\n\n      case \"End\":\n      case \"PageDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getLastOption().value\n          });\n        }\n\n        break;\n\n      case \"Escape\":\n        if (state !== IDLE) {\n          transition(ESCAPE);\n        }\n\n        break;\n\n      case \"Enter\":\n        if (state === NAVIGATING && navigationValue !== null) {\n          // don't want to submit forms\n          event.preventDefault();\n          onSelect && onSelect(navigationValue);\n          transition(SELECT_WITH_KEYBOARD, {\n            isControlled: isControlledRef.current\n          });\n        }\n\n        break;\n    }\n  };\n}\n\nfunction useBlur() {\n  var _React$useContext9 = useContext(ComboboxContext),\n      state = _React$useContext9.state,\n      transition = _React$useContext9.transition,\n      popoverRef = _React$useContext9.popoverRef,\n      inputRef = _React$useContext9.inputRef,\n      buttonRef = _React$useContext9.buttonRef;\n\n  return function handleBlur(event) {\n    var popover = popoverRef.current;\n    var input = inputRef.current;\n    var button = buttonRef.current;\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\n\n    if (activeElement !== input && activeElement !== button && popover) {\n      if (popover.contains(activeElement)) {\n        // focus landed inside the combobox, keep it open\n        if (state !== INTERACTING) {\n          transition(INTERACT);\n        }\n      } else {\n        // focus landed outside the combobox, close it.\n        transition(BLUR);\n      }\n    }\n  };\n}\n/**\n * This manages transitions between states with a built in reducer to manage\n * the data that goes with those transitions.\n *\n * @param chart\n * @param reducer\n * @param initialData\n */\n\n\nfunction useReducerMachine(chart, reducer, initialData) {\n  var _React$useState = useState(chart.initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var _React$useReducer = useReducer(reducer, initialData),\n      data = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var transition = function transition(event, payload) {\n    if (payload === void 0) {\n      payload = {};\n    }\n\n    var currentState = chart.states[state];\n    var nextState = currentState && currentState.on[event];\n\n    if (nextState) {\n      dispatch(_extends({\n        type: event,\n        state: state,\n        nextState: state\n      }, payload));\n      setState(nextState);\n      return;\n    }\n  };\n\n  return [state, data, transition];\n}\n/**\n * We don't want to track the active descendant with indexes because nothing is\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\n * ENTER. That only happens if you use the index as your data, rather than\n * *your data as your data*. We use this to generate a unique ID based on the\n * value of each item.  This function is short, sweet, and good enough™ (I also\n * don't know how it works, tbqh)\n *\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\n * @param str\n */\n\n\nfunction makeHash(str) {\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash = hash & hash;\n  }\n\n  return hash;\n} // function getActiveElement(node: Element | null | undefined) {\n//   let activeElement: Element | null = null;\n//   try {\n//     // If Element.getRootNode is supported, we'll retrieve either the root\n//     // Document or shadow root depending on where the component is rendered.\n//     // https://github.com/reach/reach-ui/issues/787\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\n//       .activeElement;\n//   } finally {\n//     return activeElement || (node?.ownerDocument || document).activeElement;\n//   }\n// }\n\n\nfunction getDataState(state) {\n  return state.toLowerCase();\n}\n/**\n * Escape regexp special characters in `str`\n *\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\n * @param str\n */\n\n\nfunction escapeRegexp(str) {\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\n} //////////////////////////\n//////////////////////////////////////////////////////\n\n/**\n * A hook that exposes data for a given `Combobox` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\n\nfunction useComboboxContext() {\n  var _React$useContext10 = useContext(ComboboxContext),\n      isExpanded = _React$useContext10.isExpanded,\n      comboboxId = _React$useContext10.comboboxId,\n      data = _React$useContext10.data,\n      state = _React$useContext10.state;\n\n  var navigationValue = data.navigationValue;\n  return useMemo(function () {\n    return {\n      id: comboboxId,\n      isExpanded: isExpanded,\n      navigationValue: navigationValue != null ? navigationValue : null,\n      state: state\n    };\n  }, [comboboxId, isExpanded, navigationValue, state]);\n}\n/**\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\n\nfunction useComboboxOptionContext() {\n  var _React$useContext11 = useContext(OptionContext),\n      value = _React$useContext11.value,\n      index = _React$useContext11.index;\n\n  return useMemo(function () {\n    return {\n      value: value,\n      index: index\n    };\n  }, [value, index]);\n} ////////////////////////////////////////////////////////////////////////////////\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\n// what the heck?). Have a great day :D\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\n\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useKeyDown as unstable_useKeyDown, useComboboxContext, useComboboxOptionContext };","map":{"version":3,"names":["forwardRef","useRef","createElement","useContext","useEffect","useCallback","useMemo","Fragment","useState","useReducer","PropTypes","useIsomorphicLayoutEffect","createNamedContext","isFunction","makeId","noop","useCheckStyles","useComposedRefs","useUpdateEffect","useStatefulRefValue","composeEventHandlers","createDescendantContext","useDescendantsInit","DescendantProvider","useDescendant","useDescendants","useId","Popover","positionMatchWidth","warning","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","findAll","_ref","autoEscape","_ref$caseSensitive","caseSensitive","_ref$findChunks","findChunks","defaultFindChunks","sanitize","searchWords","textToHighlight","fillInChunks","chunksToHighlight","combineChunks","chunks","totalLength","_ref2","sort","first","second","start","reduce","processedChunks","nextChunk","prevChunk","pop","end","endIndex","Math","max","push","highlight","_ref3","_ref3$sanitize","defaultSanitize","filter","searchWord","escapeRegExpFn","regex","RegExp","match","exec","index","lastIndex","_ref4","allChunks","append","forEach","chunk","string","replace","HighlightWords","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_on","_on2","_on3","_on4","_states","IDLE","SUGGESTING","NAVIGATING","INTERACTING","CLEAR","CHANGE","INITIAL_CHANGE","NAVIGATE","SELECT_WITH_KEYBOARD","SELECT_WITH_CLICK","ESCAPE","BLUR","INTERACT","FOCUS","OPEN_WITH_BUTTON","OPEN_WITH_INPUT_CLICK","CLOSE_WITH_BUTTON","stateChart","initial","states","on","reducer","data","event","nextState","lastEventType","type","navigationValue","value","findNavigationValue","isControlled","popoverIsExpanded","state","includes","stateData","persistSelection","ComboboxDescendantContext","ComboboxContext","OptionContext","Combobox","forwardedRef","_data$navigationValue","onSelect","_ref$openOnFocus","openOnFocus","children","_ref$as","as","Comp","ariaLabel","ariaLabelledby","props","_useDescendantsInit","options","setOptions","inputRef","popoverRef","buttonRef","autocompletePropRef","persistSelectionRef","defaultData","_useReducerMachine","useReducerMachine","transition","useFocusManagement","id","listboxId","isControlledRef","isExpanded","context","comboboxId","items","set","Provider","getDataState","undefined","ref","process","env","NODE_ENV","displayName","propTypes","any","func","bool","ComboboxInput","_ref2$as","_ref2$selectOnClick","selectOnClick","_ref2$autocomplete","autocomplete","onClick","onChange","onKeyDown","onBlur","onFocus","controlledValue","_React$useRef","initialControlledValue","current","controlledValueChangedRef","_React$useContext","_React$useContext$dat","selectOnClickRef","handleKeyDown","useKeyDown","handleBlur","useBlur","wasInitiallyControlled","handleValueChange","trim","handleChange","handleFocus","handleClick","_inputRef$current","select","inputValue","String","makeHash","role","ComboboxPopover","_ref3$as","_ref3$portal","portal","_ref3$position","position","_React$useContext2","sharedProps","hidden","tabIndex","targetRef","unstable_skipInitialPortalRender","ComboboxList","_ref4$persistSelectio","_ref4$as","_React$useContext3","ComboboxOption","_ref5","_ref5$as","indexProp","_React$useContext4","ownRef","_useStatefulRefValue","element","handleRefSet","descendant","isActive","ComboboxOptionText","_React$useContext5","_React$useContext6","contextValue","results","escapeRegexp","split","map","result","str","slice","ComboboxButton","_ref6","_ref6$as","_React$useContext7","_inputRef$current2","focus","_React$useContext8","findIndex","_ref7","getNextOption","atBottom","getFirstOption","getPreviousOption","atTop","getLastOption","preventDefault","next","prev","_React$useContext9","popover","input","button","activeElement","relatedTarget","contains","chart","initialData","_React$useState","setState","_React$useReducer","dispatch","payload","currentState","hash","_char","charCodeAt","toLowerCase","useComboboxContext","_React$useContext10","useComboboxOptionContext","_React$useContext11","unstable_useKeyDown"],"sources":["/home/labber/lighthouse/GeTogether/react-front-end/node_modules/@reach/combobox/dist/reach-combobox.esm.js"],"sourcesContent":["import { forwardRef, useRef, createElement, useContext, useEffect, useCallback, useMemo, Fragment, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useIsomorphicLayoutEffect } from '@reach/utils/use-isomorphic-layout-effect';\nimport { createNamedContext } from '@reach/utils/context';\nimport { isFunction } from '@reach/utils/type-check';\nimport { makeId } from '@reach/utils/make-id';\nimport { noop } from '@reach/utils/noop';\nimport { useCheckStyles } from '@reach/utils/dev-utils';\nimport { useComposedRefs } from '@reach/utils/compose-refs';\nimport { useUpdateEffect } from '@reach/utils/use-update-effect';\nimport { useStatefulRefValue } from '@reach/utils/use-stateful-ref-value';\nimport { composeEventHandlers } from '@reach/utils/compose-event-handlers';\nimport { createDescendantContext, useDescendantsInit, DescendantProvider, useDescendant, useDescendants } from '@reach/descendants';\nimport { useId } from '@reach/auto-id';\nimport { Popover, positionMatchWidth } from '@reach/popover';\nimport warning from 'tiny-warning';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n// Forked from https://github.com/bvaughn/highlight-words-core\n\n/**\n * Creates an array of chunk objects representing both higlightable and non\n * highlightable pieces of text that match each search word.\n *\n * @return Array of \"chunk\" objects\n */\nfunction findAll(_ref) {\n  var autoEscape = _ref.autoEscape,\n      _ref$caseSensitive = _ref.caseSensitive,\n      caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n      _ref$findChunks = _ref.findChunks,\n      findChunks = _ref$findChunks === void 0 ? defaultFindChunks : _ref$findChunks,\n      sanitize = _ref.sanitize,\n      searchWords = _ref.searchWords,\n      textToHighlight = _ref.textToHighlight;\n  return fillInChunks({\n    chunksToHighlight: combineChunks({\n      chunks: findChunks({\n        autoEscape: autoEscape,\n        caseSensitive: caseSensitive,\n        sanitize: sanitize,\n        searchWords: searchWords,\n        textToHighlight: textToHighlight\n      })\n    }),\n    totalLength: textToHighlight ? textToHighlight.length : 0\n  });\n}\n/**\n * Takes an array of \"chunk\" objects and combines chunks that overlap into\n * single chunks.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction combineChunks(_ref2) {\n  var chunks = _ref2.chunks;\n  return chunks.sort(function (first, second) {\n    return first.start - second.start;\n  }).reduce(function (processedChunks, nextChunk) {\n    // First chunk just goes straight in the array...\n    if (processedChunks.length === 0) {\n      return [nextChunk];\n    } else {\n      // ... subsequent chunks get checked to see if they overlap...\n      var prevChunk = processedChunks.pop();\n\n      if (nextChunk.start <= prevChunk.end) {\n        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n        // largest of the end indeces.\n        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n        processedChunks.push({\n          highlight: false,\n          start: prevChunk.start,\n          end: endIndex\n        });\n      } else {\n        processedChunks.push(prevChunk, nextChunk);\n      }\n\n      return processedChunks;\n    }\n  }, []);\n}\n/**\n * Examine text for any matches. If we find matches, add them to the returned\n * array as a \"chunk\" object.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction defaultFindChunks(_ref3) {\n  var autoEscape = _ref3.autoEscape,\n      caseSensitive = _ref3.caseSensitive,\n      _ref3$sanitize = _ref3.sanitize,\n      sanitize = _ref3$sanitize === void 0 ? defaultSanitize : _ref3$sanitize,\n      searchWords = _ref3.searchWords,\n      textToHighlight = _ref3.textToHighlight;\n  textToHighlight = sanitize(textToHighlight || \"\");\n  return searchWords.filter(function (searchWord) {\n    return searchWord;\n  }) // Remove empty words\n  .reduce(function (chunks, searchWord) {\n    searchWord = sanitize(searchWord);\n\n    if (autoEscape) {\n      searchWord = escapeRegExpFn(searchWord);\n    }\n\n    var regex = new RegExp(searchWord, caseSensitive ? \"g\" : \"gi\");\n    var match;\n\n    while (match = regex.exec(textToHighlight || \"\")) {\n      var start = match.index;\n      var end = regex.lastIndex; // We do not return zero-length matches\n\n      if (end > start) {\n        chunks.push({\n          highlight: false,\n          start: start,\n          end: end\n        });\n      } // Prevent browsers like Firefox from getting stuck in an infinite loop\n      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\n\n      if (match.index === regex.lastIndex) {\n        regex.lastIndex++;\n      }\n    }\n\n    return chunks;\n  }, []);\n}\n/**\n * Given a set of chunks to highlight, create an additional set of chunks\n * to represent the bits of text between the highlighted text.\n *\n * @return Array of \"chunk\" objects\n */\n\n\nfunction fillInChunks(_ref4) {\n  var chunksToHighlight = _ref4.chunksToHighlight,\n      totalLength = _ref4.totalLength;\n  var allChunks = [];\n\n  if (chunksToHighlight.length === 0) {\n    append(0, totalLength, false);\n  } else {\n    var lastIndex = 0;\n    chunksToHighlight.forEach(function (chunk) {\n      append(lastIndex, chunk.start, false);\n      append(chunk.start, chunk.end, true);\n      lastIndex = chunk.end;\n    });\n    append(lastIndex, totalLength, false);\n  }\n\n  return allChunks;\n\n  function append(start, end, highlight) {\n    if (end - start > 0) {\n      allChunks.push({\n        start: start,\n        end: end,\n        highlight: highlight\n      });\n    }\n  }\n}\n\nfunction defaultSanitize(string) {\n  return string;\n}\n\nfunction escapeRegExpFn(string) {\n  return string.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\n}\n\nvar HighlightWords = {\n  combineChunks: combineChunks,\n  fillInChunks: fillInChunks,\n  findAll: findAll,\n  findChunks: defaultFindChunks\n};\n\nvar _excluded = [\"onSelect\", \"openOnFocus\", \"children\", \"as\", \"aria-label\", \"aria-labelledby\"],\n    _excluded2 = [\"as\", \"selectOnClick\", \"autocomplete\", \"onClick\", \"onChange\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"value\"],\n    _excluded3 = [\"as\", \"children\", \"portal\", \"onKeyDown\", \"onBlur\", \"position\"],\n    _excluded4 = [\"persistSelection\", \"as\"],\n    _excluded5 = [\"as\", \"children\", \"index\", \"value\", \"onClick\"],\n    _excluded6 = [\"as\", \"onClick\", \"onKeyDown\"];\n\nvar _on, _on2, _on3, _on4, _states;\n// States\n// Nothing going on, waiting for the user to type or use the arrow keys\n\nvar IDLE = \"IDLE\"; // The component is suggesting options as the user types\n\nvar SUGGESTING = \"SUGGESTING\"; // The user is using the keyboard to navigate the list, not typing\n\nvar NAVIGATING = \"NAVIGATING\"; // The user is interacting with arbitrary elements inside the popup that\n// are not ComboboxInputs\n\nvar INTERACTING = \"INTERACTING\"; ////////////////////////////////////////////////////////////////////////////////\n// Events\n// User cleared the value w/ backspace, but input still has focus\n\nvar CLEAR = \"CLEAR\"; // User is typing\n\nvar CHANGE = \"CHANGE\"; // Initial input value change handler for syncing user state with state machine\n// Prevents initial change from sending the user to the NAVIGATING state\n// https://github.com/reach/reach-ui/issues/464\n\nvar INITIAL_CHANGE = \"INITIAL_CHANGE\"; // User is navigating w/ the keyboard\n\nvar NAVIGATE = \"NAVIGATE\"; // User can be navigating with keyboard and then click instead, we want the\n// value from the click, not the current nav item\n\nvar SELECT_WITH_KEYBOARD = \"SELECT_WITH_KEYBOARD\";\nvar SELECT_WITH_CLICK = \"SELECT_WITH_CLICK\"; // Pretty self-explanatory, user can hit escape or blur to close the popover\n\nvar ESCAPE = \"ESCAPE\";\nvar BLUR = \"BLUR\"; // The user left the input to interact with arbitrary elements inside the popup\n\nvar INTERACT = \"INTERACT\";\nvar FOCUS = \"FOCUS\";\nvar OPEN_WITH_BUTTON = \"OPEN_WITH_BUTTON\";\nvar OPEN_WITH_INPUT_CLICK = \"OPEN_WITH_INPUT_CLICK\";\nvar CLOSE_WITH_BUTTON = \"CLOSE_WITH_BUTTON\"; ////////////////////////////////////////////////////////////////////////////////\n\nvar stateChart = {\n  initial: IDLE,\n  states: (_states = {}, _states[IDLE] = {\n    on: (_on = {}, _on[BLUR] = IDLE, _on[CLEAR] = IDLE, _on[CHANGE] = SUGGESTING, _on[INITIAL_CHANGE] = IDLE, _on[FOCUS] = SUGGESTING, _on[NAVIGATE] = NAVIGATING, _on[OPEN_WITH_BUTTON] = SUGGESTING, _on[OPEN_WITH_INPUT_CLICK] = SUGGESTING, _on)\n  }, _states[SUGGESTING] = {\n    on: (_on2 = {}, _on2[CHANGE] = SUGGESTING, _on2[FOCUS] = SUGGESTING, _on2[NAVIGATE] = NAVIGATING, _on2[CLEAR] = IDLE, _on2[ESCAPE] = IDLE, _on2[BLUR] = IDLE, _on2[SELECT_WITH_CLICK] = IDLE, _on2[INTERACT] = INTERACTING, _on2[CLOSE_WITH_BUTTON] = IDLE, _on2)\n  }, _states[NAVIGATING] = {\n    on: (_on3 = {}, _on3[CHANGE] = SUGGESTING, _on3[FOCUS] = SUGGESTING, _on3[CLEAR] = IDLE, _on3[BLUR] = IDLE, _on3[ESCAPE] = IDLE, _on3[NAVIGATE] = NAVIGATING, _on3[SELECT_WITH_CLICK] = IDLE, _on3[SELECT_WITH_KEYBOARD] = IDLE, _on3[CLOSE_WITH_BUTTON] = IDLE, _on3[INTERACT] = INTERACTING, _on3)\n  }, _states[INTERACTING] = {\n    on: (_on4 = {}, _on4[CLEAR] = IDLE, _on4[CHANGE] = SUGGESTING, _on4[FOCUS] = SUGGESTING, _on4[BLUR] = IDLE, _on4[ESCAPE] = IDLE, _on4[NAVIGATE] = NAVIGATING, _on4[CLOSE_WITH_BUTTON] = IDLE, _on4[SELECT_WITH_CLICK] = IDLE, _on4)\n  }, _states)\n};\n\nvar reducer = function reducer(data, event) {\n  var nextState = _extends({}, data, {\n    lastEventType: event.type\n  });\n\n  switch (event.type) {\n    case CHANGE:\n    case INITIAL_CHANGE:\n      return _extends({}, nextState, {\n        navigationValue: null,\n        value: event.value\n      });\n\n    case NAVIGATE:\n    case OPEN_WITH_BUTTON:\n    case OPEN_WITH_INPUT_CLICK:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    case CLEAR:\n      return _extends({}, nextState, {\n        value: \"\",\n        navigationValue: null\n      });\n\n    case BLUR:\n    case ESCAPE:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case SELECT_WITH_CLICK:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : event.value,\n        navigationValue: null\n      });\n\n    case SELECT_WITH_KEYBOARD:\n      return _extends({}, nextState, {\n        // if controlled, \"set\" the input to what it already has, and let the\n        // user do whatever they want\n        value: event.isControlled ? data.value : data.navigationValue,\n        navigationValue: null\n      });\n\n    case CLOSE_WITH_BUTTON:\n      return _extends({}, nextState, {\n        navigationValue: null\n      });\n\n    case INTERACT:\n      return nextState;\n\n    case FOCUS:\n      return _extends({}, nextState, {\n        navigationValue: findNavigationValue(nextState, event)\n      });\n\n    default:\n      return nextState;\n  }\n};\n\nfunction popoverIsExpanded(state) {\n  return [SUGGESTING, NAVIGATING, INTERACTING].includes(state);\n}\n/**\n * When we open a list, set the navigation value to the value in the input, if\n * it's in the list, then it'll automatically be highlighted.\n *\n * @param stateData\n * @param event\n */\n\n\nfunction findNavigationValue(stateData, event) {\n  // @ts-ignore\n  if (event.value) {\n    // @ts-ignore\n    return event.value; // @ts-ignore\n  } else if (event.persistSelection) {\n    return stateData.value;\n  } else {\n    return null;\n  }\n}\n\nvar ComboboxDescendantContext = /*#__PURE__*/createDescendantContext(\"ComboboxDescendantContext\");\nvar ComboboxContext = /*#__PURE__*/createNamedContext(\"ComboboxContext\", {}); // Allows us to put the option's value on context so that ComboboxOptionText\n// can work it's highlight text magic no matter what else is rendered around\n// it.\n\nvar OptionContext = /*#__PURE__*/createNamedContext(\"OptionContext\", {}); ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Combobox\n *\n * @see Docs https://reach.tech/combobox#combobox\n */\n\nvar Combobox = /*#__PURE__*/forwardRef(function (_ref, forwardedRef) {\n  var _data$navigationValue;\n\n  var onSelect = _ref.onSelect,\n      _ref$openOnFocus = _ref.openOnFocus,\n      openOnFocus = _ref$openOnFocus === void 0 ? false : _ref$openOnFocus,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Comp = _ref$as === void 0 ? \"div\" : _ref$as,\n      ariaLabel = _ref[\"aria-label\"],\n      ariaLabelledby = _ref[\"aria-labelledby\"],\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useDescendantsInit = useDescendantsInit(),\n      options = _useDescendantsInit[0],\n      setOptions = _useDescendantsInit[1]; // Need this to focus it\n\n\n  var inputRef = useRef();\n  var popoverRef = useRef();\n  var buttonRef = useRef(); // When <ComboboxInput autocomplete={false} /> we don't want cycle back to\n  // the user's value while navigating (because it's always the user's value),\n  // but we need to know this in useKeyDown which is far away from the prop\n  // here, so we do something sneaky and write it to this ref on context so we\n  // can use it anywhere else 😛. Another new trick for me and I'm excited\n  // about this one too!\n\n  var autocompletePropRef = useRef(false);\n  var persistSelectionRef = useRef(false);\n  var defaultData = {\n    // The value the user has typed. We derive this also when the developer is\n    // controlling the value of ComboboxInput.\n    value: \"\",\n    // the value the user has navigated to with the keyboard\n    navigationValue: null\n  };\n\n  var _useReducerMachine = useReducerMachine(stateChart, reducer, defaultData),\n      state = _useReducerMachine[0],\n      data = _useReducerMachine[1],\n      transition = _useReducerMachine[2];\n\n  useFocusManagement(data.lastEventType, inputRef);\n  var id = useId(props.id);\n  var listboxId = id ? makeId(\"listbox\", id) : \"listbox\";\n  var isControlledRef = useRef(false);\n  var isExpanded = popoverIsExpanded(state);\n  var context = {\n    ariaLabel: ariaLabel,\n    ariaLabelledby: ariaLabelledby,\n    autocompletePropRef: autocompletePropRef,\n    buttonRef: buttonRef,\n    comboboxId: id,\n    data: data,\n    inputRef: inputRef,\n    isExpanded: isExpanded,\n    listboxId: listboxId,\n    onSelect: onSelect || noop,\n    openOnFocus: openOnFocus,\n    persistSelectionRef: persistSelectionRef,\n    popoverRef: popoverRef,\n    state: state,\n    transition: transition,\n    isControlledRef: isControlledRef\n  };\n  useCheckStyles(\"combobox\");\n  return /*#__PURE__*/createElement(DescendantProvider, {\n    context: ComboboxDescendantContext,\n    items: options,\n    set: setOptions\n  }, /*#__PURE__*/createElement(ComboboxContext.Provider, {\n    value: context\n  }, /*#__PURE__*/createElement(Comp, _extends({}, props, {\n    \"data-reach-combobox\": \"\",\n    \"data-state\": getDataState(state),\n    \"data-expanded\": isExpanded || undefined,\n    ref: forwardedRef\n  }), isFunction(children) ? children({\n    id: id,\n    isExpanded: isExpanded,\n    navigationValue: (_data$navigationValue = data.navigationValue) != null ? _data$navigationValue : null,\n    state: state\n  }) : children)));\n});\n/**\n * @see Docs https://reach.tech/combobox#combobox-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  Combobox.displayName = \"Combobox\";\n  Combobox.propTypes = {\n    as: PropTypes.any,\n    onSelect: PropTypes.func,\n    openOnFocus: PropTypes.bool\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxInput\n *\n * Wraps an `<input/>` with a couple extra props that work with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxinput\n */\n\n\nvar ComboboxInput = /*#__PURE__*/forwardRef(function (_ref2, forwardedRef) {\n  var _ref2$as = _ref2.as,\n      Comp = _ref2$as === void 0 ? \"input\" : _ref2$as,\n      _ref2$selectOnClick = _ref2.selectOnClick,\n      selectOnClick = _ref2$selectOnClick === void 0 ? false : _ref2$selectOnClick,\n      _ref2$autocomplete = _ref2.autocomplete,\n      autocomplete = _ref2$autocomplete === void 0 ? true : _ref2$autocomplete,\n      onClick = _ref2.onClick,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onBlur = _ref2.onBlur,\n      onFocus = _ref2.onFocus,\n      controlledValue = _ref2.value,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n\n  // https://github.com/reach/reach-ui/issues/464\n  var _React$useRef = useRef(controlledValue),\n      initialControlledValue = _React$useRef.current;\n\n  var controlledValueChangedRef = useRef(false);\n  useUpdateEffect(function () {\n    controlledValueChangedRef.current = true;\n  }, [controlledValue]);\n\n  var _React$useContext = useContext(ComboboxContext),\n      _React$useContext$dat = _React$useContext.data,\n      navigationValue = _React$useContext$dat.navigationValue,\n      value = _React$useContext$dat.value,\n      lastEventType = _React$useContext$dat.lastEventType,\n      inputRef = _React$useContext.inputRef,\n      state = _React$useContext.state,\n      transition = _React$useContext.transition,\n      listboxId = _React$useContext.listboxId,\n      autocompletePropRef = _React$useContext.autocompletePropRef,\n      openOnFocus = _React$useContext.openOnFocus,\n      isExpanded = _React$useContext.isExpanded,\n      ariaLabel = _React$useContext.ariaLabel,\n      ariaLabelledby = _React$useContext.ariaLabelledby,\n      persistSelectionRef = _React$useContext.persistSelectionRef,\n      isControlledRef = _React$useContext.isControlledRef;\n\n  var ref = useComposedRefs(inputRef, forwardedRef); // Because we close the List on blur, we need to track if the blur is\n  // caused by clicking inside the list, and if so, don't close the List.\n\n  var selectOnClickRef = useRef(false);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var isControlled = typeof controlledValue !== \"undefined\";\n  var wasInitiallyControlled = typeof initialControlledValue !== \"undefined\";\n\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? warning(!(!isControlled && wasInitiallyControlled), \"ComboboxInput is changing from controlled to uncontrolled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(!(isControlled && !wasInitiallyControlled), \"ComboboxInput is changing from uncontrolled to controlled. ComboboxInput should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled ComboboxInput for the lifetime of the component. Check the `value` prop being passed in.\") : void 0;\n  }\n\n  useEffect(function () {\n    isControlledRef.current = isControlled; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isControlled]); // Layout effect should be SSR-safe here because we don't actually do\n  // anything with this ref that involves rendering until after we've\n  // let the client hydrate in nested components.\n\n  useIsomorphicLayoutEffect(function () {\n    autocompletePropRef.current = autocomplete;\n  }, [autocomplete, autocompletePropRef]);\n  var handleValueChange = useCallback(function (value) {\n    if (value.trim() === \"\") {\n      transition(CLEAR, {\n        isControlled: isControlled\n      });\n    } else if (value === initialControlledValue && !controlledValueChangedRef.current) {\n      transition(INITIAL_CHANGE, {\n        value: value\n      });\n    } else {\n      transition(CHANGE, {\n        value: value\n      });\n    }\n  }, [initialControlledValue, transition, isControlled]);\n  useEffect(function () {\n    // If they are controlling the value we still need to do our transitions,\n    // so  we have this derived state to emulate onChange of the input as we\n    // receive new `value`s ...[*]\n    if (isControlled && controlledValue !== value && ( // https://github.com/reach/reach-ui/issues/481\n    controlledValue.trim() === \"\" ? (value || \"\").trim() !== \"\" : true)) {\n      handleValueChange(controlledValue);\n    }\n  }, [controlledValue, handleValueChange, isControlled, value]); // [*]... and when controlled, we don't trigger handleValueChange as the\n  // user types, instead the developer controls it with the normal input\n  // onChange prop\n\n  function handleChange(event) {\n    var value = event.target.value;\n\n    if (!isControlled) {\n      handleValueChange(value);\n    }\n  }\n\n  function handleFocus() {\n    if (selectOnClick) {\n      selectOnClickRef.current = true;\n    } // If we select an option with click, useFocusManagement will focus the\n    // input, in those cases we don't want to cause the menu to open back up,\n    // so we guard behind these states.\n\n\n    if (openOnFocus && lastEventType !== SELECT_WITH_CLICK) {\n      transition(FOCUS, {\n        persistSelection: persistSelectionRef.current\n      });\n    }\n  }\n\n  function handleClick() {\n    if (selectOnClickRef.current) {\n      var _inputRef$current;\n\n      selectOnClickRef.current = false;\n      (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.select();\n    }\n\n    if (openOnFocus && state === IDLE) {\n      transition(OPEN_WITH_INPUT_CLICK);\n    }\n  }\n\n  var inputValue = autocomplete && (state === NAVIGATING || state === INTERACTING) ? // When idle, we don't have a navigationValue on ArrowUp/Down\n  navigationValue || controlledValue || value : controlledValue || value;\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-activedescendant\": navigationValue ? String(makeHash(navigationValue)) : undefined,\n    \"aria-autocomplete\": \"both\",\n    \"aria-controls\": listboxId,\n    \"aria-expanded\": isExpanded,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabel ? undefined : ariaLabelledby,\n    role: \"combobox\"\n  }, props, {\n    \"data-reach-combobox-input\": \"\",\n    \"data-state\": getDataState(state),\n    ref: ref,\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    onChange: composeEventHandlers(onChange, handleChange),\n    onClick: composeEventHandlers(onClick, handleClick),\n    onFocus: composeEventHandlers(onFocus, handleFocus),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    value: inputValue || \"\"\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxinput-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxInput.displayName = \"ComboboxInput\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxPopover\n *\n * Contains the popup that renders the list. Because some UI needs to render\n * more than the list in the popup, you need to render one of these around the\n * list. For example, maybe you want to render the number of results suggested.\n *\n * @see Docs https://reach.tech/combobox#comboboxpopover\n */\n\n\nvar ComboboxPopover = /*#__PURE__*/forwardRef(function (_ref3, forwardedRef) {\n  var _ref3$as = _ref3.as,\n      Comp = _ref3$as === void 0 ? \"div\" : _ref3$as,\n      children = _ref3.children,\n      _ref3$portal = _ref3.portal,\n      portal = _ref3$portal === void 0 ? true : _ref3$portal,\n      onKeyDown = _ref3.onKeyDown,\n      onBlur = _ref3.onBlur,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? positionMatchWidth : _ref3$position,\n      props = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  var _React$useContext2 = useContext(ComboboxContext),\n      popoverRef = _React$useContext2.popoverRef,\n      inputRef = _React$useContext2.inputRef,\n      isExpanded = _React$useContext2.isExpanded,\n      state = _React$useContext2.state;\n\n  var ref = useComposedRefs(popoverRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n  var handleBlur = useBlur();\n  var sharedProps = {\n    \"data-reach-combobox-popover\": \"\",\n    \"data-state\": getDataState(state),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown),\n    onBlur: composeEventHandlers(onBlur, handleBlur),\n    // Instead of conditionally rendering the popover we use the `hidden` prop\n    // because we don't want to unmount on close (from escape or onSelect).\n    // However, the developer can conditionally render the ComboboxPopover if\n    // they do want to cause mount/unmount based on the app's own data (like\n    // results.length or whatever).\n    hidden: !isExpanded,\n    tabIndex: -1,\n    children: children\n  };\n  return portal ? /*#__PURE__*/createElement(Popover, _extends({\n    as: Comp\n  }, props, {\n    ref: ref,\n    \"data-expanded\": isExpanded || undefined,\n    position: position,\n    targetRef: inputRef,\n    unstable_skipInitialPortalRender: true\n  }, sharedProps)) : /*#__PURE__*/createElement(Comp, _extends({\n    ref: ref\n  }, props, sharedProps));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxPopover.displayName = \"ComboboxPopover\";\n}\n/**\n * @see Docs https://reach.tech/combobox#comboboxpopover-props\n */\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxList\n *\n * Contains the `ComboboxOption` elements and sets up the proper aria attributes\n * for the list.\n *\n * @see Docs https://reach.tech/combobox#comboboxlist\n */\nvar ComboboxList = /*#__PURE__*/forwardRef(function (_ref4, forwardedRef) {\n  var _ref4$persistSelectio = _ref4.persistSelection,\n      persistSelection = _ref4$persistSelectio === void 0 ? false : _ref4$persistSelectio,\n      _ref4$as = _ref4.as,\n      Comp = _ref4$as === void 0 ? \"ul\" : _ref4$as,\n      props = _objectWithoutPropertiesLoose(_ref4, _excluded4);\n\n  var _React$useContext3 = useContext(ComboboxContext),\n      persistSelectionRef = _React$useContext3.persistSelectionRef,\n      listboxId = _React$useContext3.listboxId;\n\n  if (persistSelection) {\n    persistSelectionRef.current = true;\n  }\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    role: \"listbox\"\n  }, props, {\n    ref: forwardedRef,\n    \"data-reach-combobox-list\": \"\",\n    id: listboxId\n  }));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxlist-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxList.displayName = \"ComboboxList\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOption\n *\n * An option that is suggested to the user as they interact with the combobox.\n *\n * @see Docs https://reach.tech/combobox#comboboxoption\n */\n\n\nvar ComboboxOption = /*#__PURE__*/forwardRef(function (_ref5, forwardedRef) {\n  var _ref5$as = _ref5.as,\n      Comp = _ref5$as === void 0 ? \"li\" : _ref5$as,\n      children = _ref5.children,\n      indexProp = _ref5.index,\n      value = _ref5.value,\n      onClick = _ref5.onClick,\n      props = _objectWithoutPropertiesLoose(_ref5, _excluded5);\n\n  var _React$useContext4 = useContext(ComboboxContext),\n      onSelect = _React$useContext4.onSelect,\n      navigationValue = _React$useContext4.data.navigationValue,\n      transition = _React$useContext4.transition,\n      isControlledRef = _React$useContext4.isControlledRef;\n\n  var ownRef = useRef(null);\n\n  var _useStatefulRefValue = useStatefulRefValue(ownRef, null),\n      element = _useStatefulRefValue[0],\n      handleRefSet = _useStatefulRefValue[1];\n\n  var descendant = useMemo(function () {\n    return {\n      element: element,\n      value: value\n    };\n  }, [value, element]);\n  var index = useDescendant(descendant, ComboboxDescendantContext, indexProp);\n  var ref = useComposedRefs(forwardedRef, handleRefSet);\n  var isActive = navigationValue === value;\n\n  var handleClick = function handleClick() {\n    onSelect && onSelect(value);\n    transition(SELECT_WITH_CLICK, {\n      value: value,\n      isControlled: isControlledRef.current\n    });\n  };\n\n  return /*#__PURE__*/createElement(OptionContext.Provider, {\n    value: {\n      value: value,\n      index: index\n    }\n  }, /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-selected\": isActive,\n    role: \"option\"\n  }, props, {\n    \"data-reach-combobox-option\": \"\",\n    ref: ref,\n    id: String(makeHash(value)),\n    \"data-highlighted\": isActive ? \"\" : undefined // Without this the menu will close from `onBlur`, but with it the\n    // element can be `document.activeElement` and then our focus checks in\n    // onBlur will work as intended\n    ,\n    tabIndex: -1,\n    onClick: composeEventHandlers(onClick, handleClick)\n  }), children ? isFunction(children) ? children({\n    value: value,\n    index: index\n  }) : children : /*#__PURE__*/createElement(ComboboxOptionText, null)));\n});\n/**\n * @see Docs https://reach.tech/combobox#comboboxoption-props\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOption.displayName = \"ComboboxOption\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxOptionText\n *\n * Renders the value of a `ComboboxOption` as text but with spans wrapping the\n * matching and non-matching segments of text.\n *\n * We don't forwardRef or spread props because we render multiple spans or null,\n * should be fine 🤙\n *\n * @example\n *   <ComboboxOption value=\"Seattle\">\n *     🌧 <ComboboxOptionText />\n *   </ComboboxOption>\n *\n * @see Docs https://reach.tech/combobox#comboboxoptiontext\n */\n\n\nfunction ComboboxOptionText() {\n  var _React$useContext5 = useContext(OptionContext),\n      value = _React$useContext5.value;\n\n  var _React$useContext6 = useContext(ComboboxContext),\n      contextValue = _React$useContext6.data.value;\n\n  var results = useMemo(function () {\n    return HighlightWords.findAll({\n      searchWords: escapeRegexp(contextValue || \"\").split(/\\s+/),\n      textToHighlight: value\n    });\n  }, [contextValue, value]);\n  return /*#__PURE__*/createElement(Fragment, null, results.length ? results.map(function (result, index) {\n    var str = value.slice(result.start, result.end);\n    return /*#__PURE__*/createElement(\"span\", {\n      key: index,\n      \"data-reach-combobox-option-text\": \"\",\n      \"data-user-value\": result.highlight ? true : undefined,\n      \"data-suggested-value\": result.highlight ? undefined : true\n    }, str);\n  }) : value);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxOptionText.displayName = \"ComboboxOptionText\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * ComboboxButton\n */\n\n\nvar ComboboxButton = /*#__PURE__*/forwardRef(function (_ref6, forwardedRef) {\n  var _ref6$as = _ref6.as,\n      Comp = _ref6$as === void 0 ? \"button\" : _ref6$as,\n      onClick = _ref6.onClick,\n      onKeyDown = _ref6.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref6, _excluded6);\n\n  var _React$useContext7 = useContext(ComboboxContext),\n      transition = _React$useContext7.transition,\n      state = _React$useContext7.state,\n      buttonRef = _React$useContext7.buttonRef,\n      listboxId = _React$useContext7.listboxId,\n      isExpanded = _React$useContext7.isExpanded;\n\n  var ref = useComposedRefs(buttonRef, forwardedRef);\n  var handleKeyDown = useKeyDown();\n\n  var handleClick = function handleClick() {\n    if (state === IDLE) {\n      transition(OPEN_WITH_BUTTON);\n    } else {\n      transition(CLOSE_WITH_BUTTON);\n    }\n  };\n\n  return /*#__PURE__*/createElement(Comp, _extends({\n    \"aria-controls\": listboxId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-expanded\": isExpanded\n  }, props, {\n    \"data-reach-combobox-button\": \"\",\n    ref: ref,\n    onClick: composeEventHandlers(onClick, handleClick),\n    onKeyDown: composeEventHandlers(onKeyDown, handleKeyDown)\n  }));\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ComboboxButton.displayName = \"ComboboxButton\";\n} ////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Move focus back to the input if we start navigating w/ the\n * keyboard after focus has moved to any focusable content in\n * the popup.\n *\n * @param lastEventType\n * @param inputRef\n */\n\n\nfunction useFocusManagement(lastEventType, inputRef) {\n  // useLayoutEffect so that the cursor goes to the end of the input instead\n  // of awkwardly at the beginning, unclear to me why 🤷‍♂️\n  //\n  // Should be safe to use here since we're just focusing an input.\n  useIsomorphicLayoutEffect(function () {\n    if (lastEventType === NAVIGATE || lastEventType === ESCAPE || lastEventType === SELECT_WITH_CLICK || lastEventType === OPEN_WITH_BUTTON) {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.focus();\n    }\n  }, [inputRef, lastEventType]);\n}\n/**\n * We want the same events when the input or the popup have focus (HOW COOL ARE\n * HOOKS BTW?) This is probably the hairiest piece but it's not bad.\n */\n\n\nfunction useKeyDown() {\n  var _React$useContext8 = useContext(ComboboxContext),\n      navigationValue = _React$useContext8.data.navigationValue,\n      onSelect = _React$useContext8.onSelect,\n      state = _React$useContext8.state,\n      transition = _React$useContext8.transition,\n      autocompletePropRef = _React$useContext8.autocompletePropRef,\n      persistSelectionRef = _React$useContext8.persistSelectionRef,\n      isControlledRef = _React$useContext8.isControlledRef;\n\n  var options = useDescendants(ComboboxDescendantContext);\n  return function handleKeyDown(event) {\n    var index = options.findIndex(function (_ref7) {\n      var value = _ref7.value;\n      return value === navigationValue;\n    });\n\n    function getNextOption() {\n      var atBottom = index === options.length - 1;\n\n      if (atBottom) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getFirstOption();\n        }\n      } else {\n        // Go to the next item in the list\n        return options[(index + 1) % options.length];\n      }\n    }\n\n    function getPreviousOption() {\n      var atTop = index === 0;\n\n      if (atTop) {\n        if (autocompletePropRef.current) {\n          // Go back to the value the user has typed because we are\n          // autocompleting and they need to be able to get back to what\n          // they had typed w/o having to backspace out.\n          return null;\n        } else {\n          // cycle through\n          return getLastOption();\n        }\n      } else if (index === -1) {\n        // displaying the user's value, so go select the last one\n        return getLastOption();\n      } else {\n        // normal case, select previous\n        return options[(index - 1 + options.length) % options.length];\n      }\n    }\n\n    function getFirstOption() {\n      return options[0];\n    }\n\n    function getLastOption() {\n      return options[options.length - 1];\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || !options.length) {\n          return;\n        }\n\n        if (state === IDLE) {\n          // Opening a closed list\n          transition(NAVIGATE, {\n            persistSelection: persistSelectionRef.current\n          });\n        } else {\n          var next = getNextOption();\n          transition(NAVIGATE, {\n            value: next ? next.value : null\n          });\n        }\n\n        break;\n      // A lot of duplicate code with ArrowDown up next, I'm already over it.\n\n      case \"ArrowUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          var prev = getPreviousOption();\n          transition(NAVIGATE, {\n            value: prev ? prev.value : null\n          });\n        }\n\n        break;\n\n      case \"Home\":\n      case \"PageUp\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getFirstOption().value\n          });\n        }\n\n        break;\n\n      case \"End\":\n      case \"PageDown\":\n        // Don't scroll the page\n        event.preventDefault();\n\n        if (!options || options.length === 0) {\n          return;\n        }\n\n        if (state === IDLE) {\n          transition(NAVIGATE);\n        } else {\n          transition(NAVIGATE, {\n            value: getLastOption().value\n          });\n        }\n\n        break;\n\n      case \"Escape\":\n        if (state !== IDLE) {\n          transition(ESCAPE);\n        }\n\n        break;\n\n      case \"Enter\":\n        if (state === NAVIGATING && navigationValue !== null) {\n          // don't want to submit forms\n          event.preventDefault();\n          onSelect && onSelect(navigationValue);\n          transition(SELECT_WITH_KEYBOARD, {\n            isControlled: isControlledRef.current\n          });\n        }\n\n        break;\n    }\n  };\n}\n\nfunction useBlur() {\n  var _React$useContext9 = useContext(ComboboxContext),\n      state = _React$useContext9.state,\n      transition = _React$useContext9.transition,\n      popoverRef = _React$useContext9.popoverRef,\n      inputRef = _React$useContext9.inputRef,\n      buttonRef = _React$useContext9.buttonRef;\n\n  return function handleBlur(event) {\n    var popover = popoverRef.current;\n    var input = inputRef.current;\n    var button = buttonRef.current;\n    var activeElement = event.relatedTarget; // we on want to close only if focus propss outside the combobox\n\n    if (activeElement !== input && activeElement !== button && popover) {\n      if (popover.contains(activeElement)) {\n        // focus landed inside the combobox, keep it open\n        if (state !== INTERACTING) {\n          transition(INTERACT);\n        }\n      } else {\n        // focus landed outside the combobox, close it.\n        transition(BLUR);\n      }\n    }\n  };\n}\n/**\n * This manages transitions between states with a built in reducer to manage\n * the data that goes with those transitions.\n *\n * @param chart\n * @param reducer\n * @param initialData\n */\n\n\nfunction useReducerMachine(chart, reducer, initialData) {\n  var _React$useState = useState(chart.initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var _React$useReducer = useReducer(reducer, initialData),\n      data = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var transition = function transition(event, payload) {\n    if (payload === void 0) {\n      payload = {};\n    }\n\n    var currentState = chart.states[state];\n    var nextState = currentState && currentState.on[event];\n\n    if (nextState) {\n      dispatch(_extends({\n        type: event,\n        state: state,\n        nextState: state\n      }, payload));\n      setState(nextState);\n      return;\n    }\n  };\n\n  return [state, data, transition];\n}\n/**\n * We don't want to track the active descendant with indexes because nothing is\n * more annoying in a combobox than having it change values RIGHT AS YOU HIT\n * ENTER. That only happens if you use the index as your data, rather than\n * *your data as your data*. We use this to generate a unique ID based on the\n * value of each item.  This function is short, sweet, and good enough™ (I also\n * don't know how it works, tbqh)\n *\n * @see https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\n * @param str\n */\n\n\nfunction makeHash(str) {\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash = hash & hash;\n  }\n\n  return hash;\n} // function getActiveElement(node: Element | null | undefined) {\n//   let activeElement: Element | null = null;\n//   try {\n//     // If Element.getRootNode is supported, we'll retrieve either the root\n//     // Document or shadow root depending on where the component is rendered.\n//     // https://github.com/reach/reach-ui/issues/787\n//     activeElement = (node?.getRootNode() as ShadowRoot | Document)\n//       .activeElement;\n//   } finally {\n//     return activeElement || (node?.ownerDocument || document).activeElement;\n//   }\n// }\n\n\nfunction getDataState(state) {\n  return state.toLowerCase();\n}\n/**\n * Escape regexp special characters in `str`\n *\n * @see https://github.com/component/escape-regexp/blob/5ce923c1510c9802b3da972c90b6861dd2829b6b/index.js\n * @param str\n */\n\n\nfunction escapeRegexp(str) {\n  return String(str).replace(/([.*+?=^!:${}()|[\\]/\\\\])/g, \"\\\\$1\");\n} //////////////////////////\n//////////////////////////////////////////////////////\n\n/**\n * A hook that exposes data for a given `Combobox` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\nfunction useComboboxContext() {\n  var _React$useContext10 = useContext(ComboboxContext),\n      isExpanded = _React$useContext10.isExpanded,\n      comboboxId = _React$useContext10.comboboxId,\n      data = _React$useContext10.data,\n      state = _React$useContext10.state;\n\n  var navigationValue = data.navigationValue;\n  return useMemo(function () {\n    return {\n      id: comboboxId,\n      isExpanded: isExpanded,\n      navigationValue: navigationValue != null ? navigationValue : null,\n      state: state\n    };\n  }, [comboboxId, isExpanded, navigationValue, state]);\n}\n/**\n * A hook that exposes data for a given `ComboboxOption` component to its descendants.\n *\n * @see Docs https://reach.tech/combobox#usecomboboxcontext\n */\n\nfunction useComboboxOptionContext() {\n  var _React$useContext11 = useContext(OptionContext),\n      value = _React$useContext11.value,\n      index = _React$useContext11.index;\n\n  return useMemo(function () {\n    return {\n      value: value,\n      index: index\n    };\n  }, [value, index]);\n} ////////////////////////////////////////////////////////////////////////////////\n// Well alright, you made it all the way here to like 1100 lines of code (geez,\n// what the heck?). Have a great day :D\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\nexport { Combobox, ComboboxButton, ComboboxInput, ComboboxList, ComboboxOption, ComboboxOptionText, ComboboxPopover, escapeRegexp, useKeyDown as unstable_useKeyDown, useComboboxContext, useComboboxOptionContext };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}